<div class="mx-auto p-6 lg:px-8">
    <div class="mt-2">
        <h2 class="text-2xl font-bold">Lists: Home</h2>
    </div>
    <div class="flex direction-end mt-2 justify-end">
        <p-button label="Create List" (onClick)="create()"/>
    </div>
    <div class="mt-2">
        <p-table
            [value]="records"
            [lazy]="true"
            [paginator]="true"
            [rows]="10"
            [totalRecords]="totalRecords"
            [loading]="loading"
            (onLazyLoad)="loadData($event)"
            [globalFilterFields]="['name', 'email']"
            [rowsPerPageOptions]="[10, 20, 50]"
        >
            <ng-template #caption>
                <div class="flex justify-between">
                    <input pInputText type="text" (input)="onGlobalFilter($event)" placeholder="Search keyword" />
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="number_entries">
                        <div class="flex items-center gap-2">
                            Count
                            <p-sortIcon field="number_entries"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="description">
                        <div class="flex items-center gap-2">
                            Description
                            <p-sortIcon field="description"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="type">
                        <div class="flex items-center gap-2">
                            Data Type
                            <p-sortIcon field="type"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="is_dynamic">
                        <div class="flex items-center gap-2">
                            List Type
                            <p-sortIcon field="is_dynamic"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="owner">
                        <div class="flex items-center gap-2">
                            Owner
                            <p-sortIcon field="owner"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="date_created">
                        <div class="flex items-center gap-2">
                            Created
                            <p-sortIcon field="date_created"></p-sortIcon>
                        </div>
                    </th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row>
                <tr>
                    <td>
                        {{row.number_entries}}
                    </td>
                    <td>
                        <p-button class="link-btn" label="{{row.description}}" link routerLink="{{row.saved_list_id}}"/>
                    </td>
                    <td>
                        {{row.type}}
                    </td>
                    <td>
                        {{row.is_dynamic ? 'Dynamic' : 'Static'}}
                    </td>
                    <td>{{ row.owner }}</td>
                     <td>
                        {{ row.date_created | date : "dd/MM/yyyy (hh:mm a)" }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<app-list-modal #listModal (reloadTable)="reloadTable()"></app-list-modal>