<div class="mx-auto p-6 lg:px-8">
    <div class="mt-2">
        <h2 class="text-2xl font-bold">Headhunts: Home</h2>
    </div>
    <div class="mt-2">
        <p-table
            [value]="records"
            [lazy]="true"
            [paginator]="true"
            [rows]="10"
            [totalRecords]="totalRecords"
            [loading]="loading"
            (onLazyLoad)="loadData($event)"
            [globalFilterFields]="['name', 'email']"
            [rowsPerPageOptions]="[10, 20, 50]"
        >
            <ng-template #caption>
                <div class="flex">
                    <input pInputText type="text" (input)="onGlobalFilter($event)" placeholder="Search keyword" />
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="id">
                        <div class="flex items-center gap-2">
                            ID
                            <p-sortIcon field="id" />
                        </div>
                    </th>
                    <th pSortableColumn="name">
                         <div class="flex items-center gap-2">
                            Name
                            <p-sortIcon field="name" />
                        </div>
                    </th>
                    <th pSortableColumn="email">
                        <div class="flex items-center gap-2">
                            Email
                            <p-sortIcon field="email" />
                        </div>
                    </th>
                    <th pSortableColumn="phone">
                        <div class="flex items-center gap-2">
                            Phone
                            <p-sortIcon field="phone" />
                        </div>
                    </th>
                    <th pSortableColumn="register_date">
                        <div class="flex items-center gap-2">
                            Created
                            <p-sortIcon field="register_date" />
                        </div>
                    </th>
                    <th pSortableColumn="verified">
                        <div class="flex items-center gap-2">
                            Verified
                            <p-sortIcon field="verified" />
                        </div>
                    </th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row>
                <tr>
                    <td>{{ row.id }}</td>
                    <td>
                        <p-button class="link-btn" label="{{row.name}}" link routerLink="{{row.id}}"/>
                    </td>
                    <td>{{ row.email }}</td>
                    <td>{{ row.phone }}</td>
                    <td>{{ row.register_date * 1000 | date : 'dd/MM/yyyy' }}</td>
                    <td>
                        <p-toggleswitch [(ngModel)]="row.verified" [trueValue]=1 [falseValue]=0 (onChange)="changeValue($event, row.id)"></p-toggleswitch>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>